{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'Login',\n\n  data() {\n    return {\n      username: '',\n      password: '',\n      errors: []\n    };\n  },\n\n  methods: {\n    async logIn() {\n      axios.defaults.headers.common['Authorization'] = '';\n      window.localStorage.removeItem('token');\n      const formData = {\n        username: this.username,\n        password: this.password\n      };\n      await axios.post('api/v1/token/login', formData).then(response => {\n        const token = response.data.auth_token;\n        this.$store.commit('setToken', token);\n        axios.defaults.headers.common['Authorization'] = \"Token \" + token;\n        window.localStorage.setItem('token', token);\n        alert(this.$route.query.to); //const toPath = this.$router.query.to || '/cart'\n\n        this.$router.replace('/cart');\n      }).catch(err => {\n        if (err.response) {\n          for (const property in err.response.data) {\n            this.errors.push(`${property}: ${err.response.data[property]}`);\n          }\n        } else {\n          this.errors.push('Something went wrong.Please try again');\n          console.log(JSON.stringify(err));\n        }\n      });\n    }\n\n  },\n\n  mounted() {\n    window.document.title = 'Logo In | Djackets';\n  }\n\n};","map":{"version":3,"mappings":"AAmCI,OAAOA,KAAP,MAAkB,OAAlB;AAGA,eAAc;EACVC,IAAI,EAAC,OADK;;EAEVC,IAAI,GAAE;IACF,OAAM;MACFC,QAAQ,EAAC,EADP;MAEFC,QAAQ,EAAC,EAFP;MAGFC,MAAM,EAAC;IAHL,CAAN;EAKH,CARS;;EASVC,OAAO,EAAC;IACJ,MAAMC,KAAN,GAAa;MACTP,KAAK,CAACQ,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAA+C,EAA/C;MACAC,MAAM,CAACC,YAAP,CAAoBC,UAApB,CAA+B,OAA/B;MAEA,MAAMC,QAAO,GAAI;QACbX,QAAQ,EAAC,KAAKA,QADD;QAEbC,QAAQ,EAAC,KAAKA;MAFD,CAAjB;MAKA,MAAMJ,KAAK,CAACe,IAAN,CAAW,oBAAX,EAAgCD,QAAhC,EACDE,IADC,CACKC,QAAD,IAAY;QACd,MAAMC,KAAI,GAAID,QAAQ,CAACf,IAAT,CAAciB,UAA5B;QAEA,KAAKC,MAAL,CAAYC,MAAZ,CAAmB,UAAnB,EAA8BH,KAA9B;QACAlB,KAAK,CAACQ,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAA+C,WAAWQ,KAA1D;QACAP,MAAM,CAACC,YAAP,CAAoBU,OAApB,CAA4B,OAA5B,EAAoCJ,KAApC;QAEAK,KAAK,CAAC,KAAKC,MAAL,CAAYC,KAAZ,CAAkBC,EAAnB,CAAL,CAPc,CAQd;;QAEA,KAAKC,OAAL,CAAaC,OAAb,CAAqB,OAArB;MACH,CAZC,EAaDC,KAbC,CAaMC,GAAD,IAAO;QACV,IAAGA,GAAG,CAACb,QAAP,EAAgB;UACZ,KAAI,MAAMc,QAAV,IAAsBD,GAAG,CAACb,QAAJ,CAAaf,IAAnC,EAAwC;YACpC,KAAKG,MAAL,CAAY2B,IAAZ,CAAkB,GAAED,QAAS,KAAID,GAAG,CAACb,QAAJ,CAAaf,IAAb,CAAkB6B,QAAlB,CAA4B,EAA7D;UACJ;QACJ,CAJA,MAKI;UACA,KAAK1B,MAAL,CAAY2B,IAAZ,CAAiB,uCAAjB;UACAC,OAAO,CAACC,GAAR,CAAYC,IAAI,CAACC,SAAL,CAAeN,GAAf,CAAZ;QACJ;MACH,CAvBC,CAAN;IAwBJ;;EAlCI,CATE;;EA6CVO,OAAO,GAAE;IACL1B,MAAM,CAAC2B,QAAP,CAAgBC,KAAhB,GAAwB,oBAAxB;EACJ;;AA/CU,CAAd","names":["axios","name","data","username","password","errors","methods","logIn","defaults","headers","common","window","localStorage","removeItem","formData","post","then","response","token","auth_token","$store","commit","setItem","alert","$route","query","to","$router","replace","catch","err","property","push","console","log","JSON","stringify","mounted","document","title"],"sourceRoot":"","sources":["C:\\Users\\user\\Desktop\\django_vue_ecommerce\\djackets_vue\\src\\views\\Login.vue"],"sourcesContent":["<template>\r\n    <div class=\"page-log-in\">\r\n        <div class=\"columns\">\r\n            <div class=\"column is-4 is-offset-4\">\r\n                <h1 class=\"title\">Log in</h1>\r\n                <form @submit.prevent=\"logIn\">\r\n                    <div class=\"field\">\r\n                        <label>Username</label>\r\n                        <div class=\"control\">\r\n                            <input type=\"text\" class=\"input\" v-model=\"username\" placeholder=\"Username\">\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"field\">\r\n                        <label>Password</label>\r\n                        <div class=\"control\">\r\n                            <input type=\"password\" class=\"input\" v-model=\"password\" placeholder=\"Password\" >\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"notification is-danger\" v-if=\"errors.length\">\r\n                        <p v-for=\"(error,index) in errors\" :key=\"index\">{{error}}</p>\r\n                    </div>\r\n                    <div class=\"field\">\r\n                        <div class=\"control\">\r\n                            <button class=\"button is-dark\">Log In</button>\r\n                        </div>\r\n                    </div>\r\n                    <hr>\r\n                    Or <router-link to=\"/sign-up/\"></router-link> to sign up!\r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import axios from 'axios'\r\n\r\n\r\n    export default{\r\n        name:'Login',\r\n        data(){\r\n            return{\r\n                username:'',\r\n                password:'',\r\n                errors:[]\r\n            }\r\n        },\r\n        methods:{\r\n            async logIn(){\r\n                axios.defaults.headers.common['Authorization']=''\r\n                window.localStorage.removeItem('token')\r\n                \r\n                const formData = {\r\n                    username:this.username,\r\n                    password:this.password\r\n                }\r\n\r\n                await axios.post('api/v1/token/login',formData)\r\n                    .then((response)=>{\r\n                        const token = response.data.auth_token\r\n\r\n                        this.$store.commit('setToken',token)\r\n                        axios.defaults.headers.common['Authorization']=\"Token \" + token\r\n                        window.localStorage.setItem('token',token)\r\n\r\n                        alert(this.$route.query.to)\r\n                        //const toPath = this.$router.query.to || '/cart'\r\n\r\n                        this.$router.replace('/cart')\r\n                    })\r\n                    .catch((err)=>{\r\n                        if(err.response){\r\n                            for(const property in err.response.data){\r\n                                this.errors.push(`${property}: ${err.response.data[property]}`)\r\n                            }\r\n                        }\r\n                        else{\r\n                            this.errors.push('Something went wrong.Please try again')\r\n                            console.log(JSON.stringify(err))\r\n                        }\r\n                    })\r\n            }\r\n        },\r\n        mounted(){\r\n            window.document.title = 'Logo In | Djackets'\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"]},"metadata":{},"sourceType":"module"}